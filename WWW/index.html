<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<script src="https://cdn.socket.io/4.5.4/socket.io.min.js"></script>
		<script src="./js/jquery-3.6.3.min.js"></script>
	</head>
	<body>
		<h1>MQTT即使temporature</h1>
		<p>

			溫度:<span id="temperature">??</span> &deg; <br>
			濕度:<span id="humidity">??</span>% &deg; <br>
			AQI:<span id="AQI">??</span>
			
		</p>
		<script>
		$(function(){

			var socket = io.connect();
			socket.on('mqtt',function(data) {
				var jason =JSON.parse(data);
				var now = new Date();
				var newData;
				var series;
				var data
				if(jason.temp) {
					$("#temperature").html(jason.temp);
				}
				
				if(jason.humid) {
						$("#humidity").html(jason.humid);
				}
				if(jason.AQI) {
					if(jason.AQI>=0&&jason.AQI<=50)$("#AQI").html('良好');
					else if(jason.AQI>=51&&jason.AQI<=100)$("#AQI").html('普通');
					else if(jason.AQI>=101&&jason.AQI<=150)$("#AQI").html('對敏感族群不健康');
					else if(jason.AQI>=151&&jason.AQI<=200)$("#AQI").html('對所有族群不健康');
					else if(jason.AQI>=201&&jason.AQI<=300)$("#AQI").html('非常不健康');
					else if(jason.AQI>=301)$("#AQI").html('危害');
				}								
			});		
		});
		</script>	
 	</body>
	
</html>